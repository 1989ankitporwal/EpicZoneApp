IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
GO

BEGIN TRANSACTION;
GO

CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
GO

CREATE TABLE [UserRoles] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([Id])
);
GO

CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [UserName] nvarchar(100) NOT NULL,
    [PasswordHash] varbinary(max) NOT NULL,
    [PasswordSalt] varbinary(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [RefreshToken] nvarchar(max) NOT NULL,
    [RefreshTokenExpiryTime] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [LastActive] datetime2 NOT NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220606143414_initial', N'6.0.5');
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[Roles]'))
    SET IDENTITY_INSERT [Roles] ON;
INSERT INTO [Roles] ([Id], [Name])
VALUES (1, N'Admin'),
(2, N'User');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[Roles]'))
    SET IDENTITY_INSERT [Roles] OFF;
GO

IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[UserRoles]'))
    SET IDENTITY_INSERT [UserRoles] ON;
INSERT INTO [UserRoles] ([Id], [RoleId], [UserId])
VALUES (1, 1, 1),
(2, 2, 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'RoleId', N'UserId') AND [object_id] = OBJECT_ID(N'[UserRoles]'))
    SET IDENTITY_INSERT [UserRoles] OFF;
GO

IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Created', N'Email', N'FirstName', N'IsActive', N'LastActive', N'LastName', N'PasswordHash', N'PasswordSalt', N'RefreshToken', N'RefreshTokenExpiryTime', N'UserName') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Created], [Email], [FirstName], [IsActive], [LastActive], [LastName], [PasswordHash], [PasswordSalt], [RefreshToken], [RefreshTokenExpiryTime], [UserName])
VALUES (1, '2022-06-12T10:35:58.1877559+05:30', N'admin@gmail.com', N'Super', CAST(1 AS bit), '2022-06-12T10:35:58.1877561+05:30', N'Admin', 0x5A88EA0DC78F97A6CE3F2C7EF858ED1F2A72A67FFC936911AAA6FD89F296180B7E723C35117F4489B855DAEBD979343E55708DE5EE636CEF6800329B656868CB, 0x656992DE36E24D4F206EB32FA9C615F37A1C7CF3094695B58EB324A30D2A6184DAEFD642979C7CFD4A71BA59F4B2A0699EF1DF276A13B1AFD28911609FDC6A46AE1711C8DEE698BCF944B096554E96EEA89CCB499778751901FD7148E21C645709C89CFFDE1A9C0D70364DCD0DA7CC5060B44B2EFC129E06948020260F5EB7FC, N'VBj9IOAJtZwrMiHizKy2FkOmxM6PCJw9u9vepY4lbIg=', '2022-06-12T10:35:58.1877557+05:30', N'Admin'),
(2, '2022-06-12T10:35:58.1877570+05:30', N'user@gmail.com', N'Super', CAST(1 AS bit), '2022-06-12T10:35:58.1877572+05:30', N'User', 0x5A88EA0DC78F97A6CE3F2C7EF858ED1F2A72A67FFC936911AAA6FD89F296180B7E723C35117F4489B855DAEBD979343E55708DE5EE636CEF6800329B656868CB, 0x656992DE36E24D4F206EB32FA9C615F37A1C7CF3094695B58EB324A30D2A6184DAEFD642979C7CFD4A71BA59F4B2A0699EF1DF276A13B1AFD28911609FDC6A46AE1711C8DEE698BCF944B096554E96EEA89CCB499778751901FD7148E21C645709C89CFFDE1A9C0D70364DCD0DA7CC5060B44B2EFC129E06948020260F5EB7FC, N'VBj9IOAJtZwrMiHizKy2FkOmxM6PCJw9u9vepY4lbIg=', '2022-06-12T10:35:58.1877569+05:30', N'User');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Created', N'Email', N'FirstName', N'IsActive', N'LastActive', N'LastName', N'PasswordHash', N'PasswordSalt', N'RefreshToken', N'RefreshTokenExpiryTime', N'UserName') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220612050558_SeedingTables', N'6.0.5');
GO

COMMIT;
GO

BEGIN TRANSACTION;
GO

UPDATE [Users] SET [Created] = '2022-06-12T10:44:05.4462871+05:30', [LastActive] = '2022-06-12T10:44:05.4462872+05:30', [PasswordHash] = 0x80584B38BDFF5311CB9361AB8A730CB57CD67542ACDACB2521280F1A9B00ECC28B54DECB392D5441DD315D7F505D6E23807A6725BFB19A1DAF4737D8577072D3, [PasswordSalt] = 0xEF5795514A4277F8C17C691C73D0A7741BE7DE9E5274B370EBD7E5F61D26356069B2452D9C91F90D9ACCC09174B0552319B8DC4CC9D9CEE27A7236CBAD4610040AEF5D4341E17149E9B133283A6A0DEC625751D75003F1DB902C8E8682F2987F7F40619CBDDD10DF47237A78EB9BFB45A0C715874F3DA97F661354BF07240DD4, [RefreshTokenExpiryTime] = '2022-06-12T10:44:05.4462871+05:30'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

UPDATE [Users] SET [Created] = '2022-06-12T10:44:05.4462876+05:30', [LastActive] = '2022-06-12T10:44:05.4462876+05:30', [PasswordHash] = 0x80584B38BDFF5311CB9361AB8A730CB57CD67542ACDACB2521280F1A9B00ECC28B54DECB392D5441DD315D7F505D6E23807A6725BFB19A1DAF4737D8577072D3, [PasswordSalt] = 0xEF5795514A4277F8C17C691C73D0A7741BE7DE9E5274B370EBD7E5F61D26356069B2452D9C91F90D9ACCC09174B0552319B8DC4CC9D9CEE27A7236CBAD4610040AEF5D4341E17149E9B133283A6A0DEC625751D75003F1DB902C8E8682F2987F7F40619CBDDD10DF47237A78EB9BFB45A0C715874F3DA97F661354BF07240DD4, [RefreshTokenExpiryTime] = '2022-06-12T10:44:05.4462875+05:30'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;

GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220612051405_SeedingTables1', N'6.0.5');
GO

COMMIT;
GO

